<%- include('./partials/header') %>

<div class="px-6 py-8 lg:px-20 font-sans relative">
  <!-- Cancel button top-right -->
  <a href="/shop" class="absolute top-6 right-6 text-red-600 underline font-medium hover:text-red-800">
    Cancel
  </a>


<div class="px-6 py-8 lg:px-20 font-sans">
  <h2 class="text-2xl font-bold mb-6">Order Summary</h2>

  <form action="/buynow/place-order" method="POST" class="space-y-6">
    <!-- Hidden inputs for final POST -->
    <input type="hidden" name="productId" value="<%= product._id %>">
    <input type="hidden" name="quantity" value="<%= quantity %>">
    <input type="hidden" name="addressId" value="<%= address._id %>">
    <input type="hidden" name="paymentMethod" value="<%= paymentMethod %>">

    <!-- Address Section -->
    <div class="border p-4 rounded bg-white shadow-sm mb-4">
      <h3 class="font-semibold text-lg mb-2">Shipping Address</h3>
      <p>
        <%= address.line1 %>, <%= address.city %>, <%= address.state %>, <%= address.pincode %>
      </p>
      <a href="/account" class="text-blue-600 underline text-sm">Change Address</a>
    </div>

    <!-- Product Summary -->
    <div class="border p-4 rounded bg-white shadow-sm mb-4 flex gap-6">
      <img src="<%= product.image %>" class="w-32 h-32 object-cover rounded" alt="Product">
      <div>
        <h3 class="text-xl font-semibold"><%= product.name %></h3>
        <p>Quantity: <%= quantity %></p>
        <p>Payment Mode: <%= paymentMethod.toUpperCase() %></p>
        <p>Arriving By: <%= arrivalDate.toDateString() %></p>
      </div>
    </div>

    <!-- Bill Section -->
    <div class="border p-4 rounded bg-white shadow-sm">
      <h3 class="text-lg font-semibold mb-2">Bill Details</h3>
      <div class="flex justify-between mb-1">
        <span>Item Total:</span>
        <span>₹<%= price %></span>
      </div>
      <div class="flex justify-between mb-1">
        <span>Shipping Fee:</span>
        <span>₹<%= shippingFee %></span>
      </div>
      <div class="flex justify-between font-bold text-lg">
        <span>Total:</span>
        <span>₹<%= total %></span>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="mt-6">
      <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-500 transition">
        Place Your Order
      </button>
    </div>
  </form>
</div>

<%- include('./partials/footer') %>
